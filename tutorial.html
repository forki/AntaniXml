<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>AntaniXml Tutorial
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="xml random generator"/>
    <meta name="author" content="Giacomo Citi"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/AntaniXml/content/style.css" />
    <script type="text/javascript" src="/AntaniXml/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/giacomociti/AntaniXml">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/AntaniXml/index.html">AntaniXml</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="AntaniXml-Tutorial" class="anchor" href="#AntaniXml-Tutorial">AntaniXml Tutorial</a></h1>

<p>The main purpose of generating random xml is to produce test data.
The public API comprises factory methods to create xml generators.</p>

<p>The core modules are not intended to be directly called by client code (in the future this may change
in order to provide some <em>hook</em> to tweak generators)
Anyway here's an overview for those interested in implementation details (contributions are welcome).
The library is written in F# and organized in modulues.</p>

<h4><a name="Xsd-Domain" class="anchor" href="#Xsd-Domain">Xsd Domain</a></h4>

<p>This module provides types to represent a schema.
F# data types like discriminated unions allow for very clear definitions.
The XML schema specification is rich and complex, so this module provides a simplified view.
Nevertheless, we cover a few specific (and sometimes tricky) concepts, like nillable values, fixed values,
union and lists for simple types, whitespace handling etc.</p>

<h4><a name="Xsd-Factory" class="anchor" href="#Xsd-Factory">Xsd Factory</a></h4>

<p>This module is in charge of parsing xsd files and creating models according to XsdDomain data types.
Parsing xsd is a complex task, and for this we rely on the .NET BCL library (namespace System.Xml.Schema).
Converting the Schema Object Model (SOM) provided by the BCL library into our own simpler model is not strictly necessary.
But allows us to focus on..</p>

<h4><a name="Xml-Generator" class="anchor" href="#Xml-Generator">Xml Generator</a></h4>

<h4><a name="Constrained-Generators" class="anchor" href="#Constrained-Generators">Constrained Generators</a></h4>

<h4><a name="Known-Limitations" class="anchor" href="#Known-Limitations">Known Limitations</a></h4>

<p><a href="http://www.w3.org/XML/Schema">XML Schema</a> is rich and complex, it's inevitable to have some limitations.
A few ones are known and listed below. Some of them may hopefully be addressed in the future.
But likely there are many more unknown limitations. If you find one please raise an <a href="https://github.com/fsprojects/AntaniXml/issues">issue</a>.
Anyway don't be too scared of this disclaimer. I think AntaniXml can cope with many nuances and support many features 
(like regex thanks to <a href="https://github.com/moodmosaic/Fare">Fare</a>).</p>

<ul>
<li><p>recursive schemas -
at the moment, we simply throws an exception when an element definition refers to itself.</p></li>
<li>identity and subset constraint -
they goes against the 'generative' nature of schemas.</li>
</ul>

<h3><a name="Design-notes" class="anchor" href="#Design-notes">Design notes</a></h3>

<h2><a name="Generators-for-simple-datatypes" class="anchor" href="#Generators-for-simple-datatypes">Generators for simple datatypes</a></h2>

<p>Generation of random values for simple datatypes is mainly based on FsCheck generators.
Each simple datatype is mapped to a suitable CLR type (e.g. <code>xs:int</code> to <code>System.Int32</code>, <code>xs:integer</code> to <code>System.Numerics.BigInteger</code>...) 
for which an <a href="https://github.com/fscheck/FsCheck">FsCheck</a> generator already exists or can be easily built.
Anyway this is not enough. In case of constraining facets (like MaxLength) we have to narrow the set of values that can be generated.
An easy option is to drop generated values that violate a constraint. But we may en up discarding too many values.
Suppose we have the constraint of Length = 5. We should not generate strings of arbitrary length and then retain only those with length 5.
So we need more specific generators for each kind of constraint.</p>

<p>And for each simple datatype we need parse and format functions.
In W3C terms, parse is a map from the lexical space to the value space of the given datatype.
Usually we implement it relying on <code>System.XmlConvert</code>.
The format function instead maps values to lexical representations. 
It returns a string list because the same value may have multiple representations (e.g a plus sign may optionally prefix a number).</p>

<p>Some more info</p>


        </div>
        <div class="span3">
          <img src="/AntaniXml/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">AntaniXml</li>
            <li><a href="/AntaniXml/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/AntaniXml">Get Library via NuGet</a></li>
            <li><a href="http://github.com/giacomociti/AntaniXml">Source Code on GitHub</a></li>
            <li><a href="/AntaniXml/license.html">License</a></li>
            <li><a href="/AntaniXml/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/AntaniXml/tutorial.html">Sample tutorial</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/AntaniXml/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/giacomociti/AntaniXml"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
