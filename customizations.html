<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Customizations
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="xml random generator"/>
    <meta name="author" content="Giacomo Citi"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/AntaniXml/content/style.css" />
    <script type="text/javascript" src="/AntaniXml/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/giacomociti/AntaniXml">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/AntaniXml/index.html">AntaniXml</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Customizations" class="anchor" href="#Customizations">Customizations</a></h1>

<p>This article is about how you can customize the generated output.</p>

<h3><a name="Simply-change-the-output" class="anchor" href="#Simply-change-the-output">Simply change the output</a></h3>

<p>For some schemas the generator may produce something not correct (for example ignoring identity constraints).
Or maybe the generated values simply look ugly to you (you may want meaningful words instead of random gibberish).
One option is to change the produced output by using XSLT or by any other mean. Since the output is
an <code>XElement</code>, the <code>System.Xml.Linq</code> API is already well suited for this task:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">samples</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="t">XmlElementGenerator</span>
        <span class="o">.</span><span class="f">CreateFromSchemaUri</span>(<span class="s">&quot;foo&quot;</span>, <span class="s">&quot;e1&quot;</span>, <span class="s">&quot;&quot;</span>)
        <span class="o">.</span><span class="f">Generate</span> <span class="n">10</span>

<span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="i">samples</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs7', 8)" onmouseover="showTip(event, 'fs7', 8)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 9)" onmouseover="showTip(event, 'fs8', 9)" class="f">mapi</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs9', 10)" onmouseover="showTip(event, 'fs9', 10)" class="i">i</span> <span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="i">xml</span> <span class="k">-&gt;</span>
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs11', 12)" onmouseover="showTip(event, 'fs11', 12)" class="i">bar</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="i">xml</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs12', 14)" onmouseover="showTip(event, 'fs12', 14)" class="f">Descendants</span>(<span onmouseout="hideTip(event, 'fs13', 15)" onmouseover="showTip(event, 'fs13', 15)" class="t">XName</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 16)" onmouseover="showTip(event, 'fs14', 16)" class="f">Get</span>(<span class="s">&quot;bar&quot;</span>)) <span class="k">do</span>
        <span onmouseout="hideTip(event, 'fs11', 17)" onmouseover="showTip(event, 'fs11', 17)" class="i">bar</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 18)" onmouseover="showTip(event, 'fs15', 18)" class="f">Attribute</span>(<span onmouseout="hideTip(event, 'fs13', 19)" onmouseover="showTip(event, 'fs13', 19)" class="t">XName</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 20)" onmouseover="showTip(event, 'fs14', 20)" class="f">Get</span>(<span class="s">&quot;id&quot;</span>))<span class="o">.</span><span class="i">Value</span> <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs9', 21)" onmouseover="showTip(event, 'fs9', 21)" class="i">i</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs16', 22)" onmouseover="showTip(event, 'fs16', 22)" class="f">ToString</span>()
    <span onmouseout="hideTip(event, 'fs10', 23)" onmouseover="showTip(event, 'fs10', 23)" class="i">xml</span>)      
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs7', 24)" onmouseover="showTip(event, 'fs7', 24)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 25)" onmouseover="showTip(event, 'fs17', 25)" class="f">iter</span> (<span onmouseout="hideTip(event, 'fs18', 26)" onmouseover="showTip(event, 'fs18', 26)" class="f">printfn</span> <span class="s">&quot;</span><span class="pf">%A</span><span class="s">&quot;</span>) 
    
</code></pre></td>
</tr>
</table>

<p>The same in C# is</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="i">var</span> <span class="i">samples</span> <span class="o">=</span> <span class="i">XmlElementGenerator</span>
        <span class="o">.</span><span class="i">CreateFromSchemaUri</span>(<span class="s">&quot;foo.xsd&quot;</span>, <span class="s">&quot;e1&quot;</span>, <span class="s">&quot;&quot;</span>)
        <span class="o">.</span><span class="i">Generate</span>(<span class="n">10</span>);

    <span class="i">samples</span><span class="o">.</span><span class="i">Descendants</span>(<span class="s">&quot;bar&quot;</span>)
        <span class="o">.</span><span class="i">Select</span>((<span class="i">bar</span>, <span class="i">i</span>) <span class="o">=&gt;</span>
            {
                <span class="i">bar</span><span class="o">.</span><span class="i">Attribute</span>(<span class="s">&quot;id&quot;</span>)<span class="o">.</span><span class="i">Value</span> <span class="o">=</span> <span class="i">i</span><span class="o">.</span><span class="i">ToString</span>();
                <span class="k">return</span> <span class="i">bar</span>;
            })
        <span class="o">.</span><span class="i">ToList</span>()
        <span class="o">.</span><span class="i">ForEach</span>(<span class="i">Console</span><span class="o">.</span><span class="i">WriteLine</span>);
</code></pre></td>
</tr>
</table>

<p>The above example is trivial but you get the idea. If you don't like imperative code
you can map the element to another one, but if you just need to do little fixes the
imperative approach may be just fine.</p>

<h3><a name="Providing-you-own-generators" class="anchor" href="#Providing-you-own-generators">Providing you own generators</a></h3>

<p>Allowing custom generators is of course a superior alternative.
Support for it is still work in progress so stay tuned or, even better, fork the project and contribute :)</p>

<div class="tip" id="fs1">namespace AntaniXml</div>
<div class="tip" id="fs2">namespace System</div>
<div class="tip" id="fs3">namespace System.Xml</div>
<div class="tip" id="fs4">namespace System.Xml.Linq</div>
<div class="tip" id="fs5">val samples : XElement array<br /><br />Full name: Customizations.samples</div>
<div class="tip" id="fs6">type XmlElementGenerator =<br />&#160;&#160;static member CreateArbFromSchemaText : xsdText:string * elmName:string * elmNs:string -&gt; Arbitrary&lt;XElement&gt;<br />&#160;&#160;static member CreateArbFromSchemaUri : xsdUri:string * elmName:string * elmNs:string -&gt; Arbitrary&lt;XElement&gt;<br />&#160;&#160;static member CreateFromSchemaText : xsdText:string * elmName:string * elmNs:string -&gt; IXmlElementGenerator<br />&#160;&#160;static member CreateFromSchemaUri : xsdUri:string * elmName:string * elmNs:string -&gt; IXmlElementGenerator<br />&#160;&#160;static member private createGen : xmlSchema:XmlSchemaSet * elmName:string * elmNs:string -&gt; Gen&lt;XElement&gt;<br />&#160;&#160;static member private createGen&#39; : xmlSchema:XmlSchemaSet * elmName:string * elmNs:string -&gt; IXmlElementGenerator<br /><br />Full name: AntaniXml.XmlElementGenerator</div>
<div class="tip" id="fs7">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs8">val mapi : mapping:(int -&gt; &#39;T -&gt; &#39;U) -&gt; source:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;U&gt;<br /><br />Full name: Microsoft.FSharp.Collections.Seq.mapi</div>
<div class="tip" id="fs9">val i : int</div>
<div class="tip" id="fs10">val xml : XElement</div>
<div class="tip" id="fs11">val bar : XElement</div>
<div class="tip" id="fs12">XContainer.Descendants() : System.Collections.Generic.IEnumerable&lt;XElement&gt;<br />XContainer.Descendants(name: XName) : System.Collections.Generic.IEnumerable&lt;XElement&gt;</div>
<div class="tip" id="fs13">type XName =<br />&#160;&#160;member Equals : obj:obj -&gt; bool<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;member LocalName : string<br />&#160;&#160;member Namespace : XNamespace<br />&#160;&#160;member NamespaceName : string<br />&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;static member Get : expandedName:string -&gt; XName + 1 overload<br /><br />Full name: System.Xml.Linq.XName</div>
<div class="tip" id="fs14">XName.Get(expandedName: string) : XName<br />XName.Get(localName: string, namespaceName: string) : XName</div>
<div class="tip" id="fs15">XElement.Attribute(name: XName) : XAttribute</div>
<div class="tip" id="fs16">System.Int32.ToString() : string<br />System.Int32.ToString(provider: System.IFormatProvider) : string<br />System.Int32.ToString(format: string) : string<br />System.Int32.ToString(format: string, provider: System.IFormatProvider) : string</div>
<div class="tip" id="fs17">val iter : action:(&#39;T -&gt; unit) -&gt; source:seq&lt;&#39;T&gt; -&gt; unit<br /><br />Full name: Microsoft.FSharp.Collections.Seq.iter</div>
<div class="tip" id="fs18">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>

        </div>
        <div class="span3">
          <img src="/AntaniXml/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">AntaniXml</li>
            <li><a href="/AntaniXml/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/AntaniXml">Get Library via NuGet</a></li>
            <li><a href="http://github.com/giacomociti/AntaniXml">Source Code on GitHub</a></li>
            <li><a href="/AntaniXml/license.html">License</a></li>
            <li><a href="/AntaniXml/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/AntaniXml/tutorial.html">Tutorial</a></li>
            <li><a href="/AntaniXml/customizations.html">Customizations</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/AntaniXml/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/giacomociti/AntaniXml"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
